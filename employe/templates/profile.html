{% extends 'emp_base.html' %}

{% block main %}
<div class="card shadow m-2">
    <div class="card-body">
        <h5 class="p-5, text-danger" style="border-bottom : 2px solid orange">Profile</h5>
    </div>
    <div class="container-fluid">
        <form method="post" name="signup" onsubmit="return checkpassword()">
            {% csrf_token %}
            <div class="form-row">
                <div class="col-sm-6">
                    <div class="form-group">
                        <label>FirstName</label>
                        <input type="text" name="firstname" class="form-control" placeholder="Enter your firstname" pattern="[A-Za-z]+" value="{{ employee.user.first_name }}">
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label>LastName</label>
                        <input type="text" name="lastname" class="form-control" placeholder="Enter your lastname" pattern="[A-Za-z]+" value="{{ employee.user.last_name }}">
                    </div>
                </div>
                <div class="col-sm-12">
                    <div class="form-group">
                        <label>Employee Code</label>
                        <input type="text" name="empcode" class="form-control" placeholder="Code">
                    </div>
                </div>

                <div class="col-sm-12">
                    <div class="form-group">
                        <label>Department</label>
                        <input type="text" name="dept" class="form-control" value="{{ employee.empdept }}">
                    </div>
                </div>
<!--                <div class="col-sm-6">-->
<!--                    <div class="form-group">-->
<!--                        <label for="dept">Employee Department</label>-->
<!--                        <select id="dept" name="dept" class="form-control">-->
<!--                            <option value="">Select Department</option>-->
<!--                            {% for department in departments %}-->
<!--                                <option value="{{ department }}">{{ department }}</option>-->
<!--                            {% endfor %}-->
<!--                        </select>-->
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label>Contact</label>
                        <input type="text" name="contact" class="form-control" placeholder="Enter your number" value="{{ employee.contact }}">
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label>Joining Date</label>
                        <input type="date" name="jdate" class="form-control" placeholder="Enter the date you joined" value="{{ employee.joiningdate }}">
                    </div>
                </div>
                <div class="col-sm-12">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="email" class="form-control" placeholder="Enter your email" value="{{ employee.user.username }}">
                    </div>
                </div>
            </div>
            <input type="submit" value="Update" class="m-2 px-3 btn btn-primary">
        </form>
    </div>
</div>

{% if error == "no" %}
    <script>
        alert('Profile Updated Successful');
        window.location.href= ('{% url 'profile' %}');
    </script>
{% endif %}
{% if error == "yes" %}
    <script>
        alert('Something went wrong, please try again');
    </script>
{% endif %}
{% endblock %}
